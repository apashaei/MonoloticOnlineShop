@page
@model Admin.EndPoint.Pages.Discount.CreateModel
@{
}
@using Project.Domain.Discount
<link href="~/mdpersiandatetimepicker/jquery.md.bootstrap.datetimepicker.style.css" rel="stylesheet" />
<link href="~/lib/select2/css/select2.css" rel="stylesheet" />
<link href="~/lib/select2/css/select2.min.css" rel="stylesheet" />

<link href="https://raw.githack.com/ttskch/select2-bootstrap4-theme/master/dist/select2-bootstrap4.css" rel="stylesheet">



<div class="col-lg-12 col-12 layout-spacing">
    <div class="statbox widget box box-shadow">
        <div class="widget-header">
            <div class="row">
                <div class="col-xl-12 col-md-12 col-sm-12 col-12">
                    <h4>تخفیف جدید ثبت کنید.</h4>
                </div>
            </div>
        </div>

        <div class="widget-content widget-content-area">
            <form asp-page="create" method="post">
                <div asp-validation-summary="ModelOnly" class="text-danger"></div>

                    <div class="row">
                        <div class="form-group col-md-4">
                            <label asp-for="model.Name"></label>
                            <input type="text" class="form-control" asp-for="model.Name" />
                            <span asp-validation-for="model.Name" class="text-danger"></span>

                        </div>


                        <div class="form-group col-md-4">
                            <label asp-for="model.RequiredCouponCode"></label>
                        <input class="form-control" value="model.RequiredCouponCode" asp-for="model.RequiredCouponCode" />
                            <span asp-validation-for="model.RequiredCouponCode" class="text-danger"></span>

                        </div>

                        <div class="form-group col-md-4">
                            <label asp-for="model.CouponCode"></label>
                            <input type="text" class="form-control" asp-for="model.CouponCode" />
                            <span asp-validation-for="model.CouponCode" class="text-danger"></span>

                        </div>

                    </div>

                    <div class="row">
                        <div class="form-group col-md-4">
                            <label asp-for="model.StartDate"></label>
                        <input type="text" class="form-control" asp-for="model.StartDate" />
                            <span asp-validation-for="model.StartDate" class="text-danger"></span>

                        </div>


                        <div class="form-group col-md-4">
                            <label asp-for="model.EndDate"></label>
                        <input type="text" class="form-control" asp-for="model.EndDate" />
                            <span asp-validation-for="model.EndDate" class="text-danger"></span>

                        </div>

         
                    </div>

                    <div class="row">
                        <div class="form-group col-md-4">
                            <label asp-for="model.UsePrecentage"></label>
                            <input class="form-control" asp-for="model.UsePrecentage" value="model.UsePrecentage" />
                            <span asp-validation-for="model.UsePrecentage" class="text-danger"></span>

                        </div>


                        <div class="form-group col-md-4">
                            <label asp-for="model.DiscountPerecentage"></label>
                            <input type="text" class="form-control" asp-for="model.DiscountPerecentage" />
                            <span asp-validation-for="model.DiscountPerecentage" class="text-danger"></span>

                        </div>

                        <div class="form-group col-md-4">
                            <label asp-for="model.DiscountAmount"></label>
                            <input type="text" class="form-control" asp-for="model.DiscountAmount" />
                            <span asp-validation-for="model.DiscountAmount" class="text-danger"></span>

                        </div>
                    </div>


                    <div class="row">
                        <div class="form-group col-md-4">
                            <label asp-for="model.DiscountTypeId"></label>
                            <select class="form-control" asp-for="model.DiscountTypeId" asp-items="@Html.GetEnumSelectList<DiscountType>()"></select>
                            <span asp-validation-for="model.DiscountTypeId" class="text-danger"></span>

                        </div>


                        <div class="form-group col-md-4">
                            <label asp-for="model.DiscountLimitationId"></label>
                        <select class="form-control" asp-for="model.DiscountLimitationId" asp-items="@Html.GetEnumSelectList<DiscountLimitation>()"></select>
                            <span asp-validation-for="model.DiscountLimitationId" class="text-danger"></span>

                        </div>

                        <div class="form-group col-md-4">
                        <label asp-for="model.LimitaionTime"></label>
                        <input type="text" class="form-control" asp-for="model.LimitaionTime" />
                        <span asp-validation-for="model.LimitaionTime" class="text-danger"></span>

                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-md-4">
                            <label>محصولات را انتخاب کنید.</label>
                            <select class="form-control" asp-for="model.CatalogItemIds"></select>
                        </div>
                    </div>



                <button type="submit" class="btn btn-primary mb-2">اولیه</button>
                <button class="btn btn-info mb-2">بازگشت به لیست</button>
                
            </form>
        </div>
    </div>
</div>

@section Scripts{

    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
    <script src="~/mdpersiandatetimepicker/jquery.md.bootstrap.datetimepicker.js"></script>
    <script src="~/lib/select2/js/select2.full.js"></script>
    <script src="~/lib/select2/js/select2.full.min.js"></script>
    <script src="~/lib/select2/js/select2.js"></script>
    <script src="~/lib/select2/js/select2.min.js"></script>
    <script>
      $('#model_StartDate').MdPersianDateTimePicker({
            targetTextSelector: '#model_StartDate',
            toDate: true,
            groupId: 'rangeSelector1',
            placement: 'top',
            enableTimePicker: true,
            dateFormat: 'yyyy-MM-dd HH:mm:ss',
            textFormat: 'yyyy-MM-dd HH:mm:ss',
            modalMode: true
        });



      $('#model_EndDate').MdPersianDateTimePicker({
            targetTextSelector: '#model_EndDate',
            toDate: true,
            groupId: 'rangeSelector1',
            placement: 'top',
            enableTimePicker: true,
            dateFormat: 'yyyy-MM-dd HH:mm:ss',
            textFormat: 'yyyy-MM-dd HH:mm:ss',
            modalMode: true
        });
    </script>

    <script>
        $("#model_CatalogItemIds").select2({
            placeholder: "محصول را جستجو وانتخاب کنید",
            allowClear: true,
            multiple: true,
            tags: true,
            tokenSeparators: [',', ' '],
            theme: "bootstrap4",
            ajax: {
                url: "/api/DiscountApi/SerachCatalogItem",
                contentType: "application/json; charset=utf-8",
                data: function (params) {
                    var query =
                    {
                        term: params.term,
                    };
                    return query;
                },
                processResults: function (result) {
                    return {
                        results: $.map(result, function (item) {
                            return {
                                id: item.id,
                                text: item.name
                            };
                        }),
                    };
                }
            }
        });
    </script>

}
